<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create Directus Personal Access Token — generate_directus_pat • drivesR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create Directus Personal Access Token — generate_directus_pat"><meta name="description" content='This function generates a personal access token (PAT) for a user
who has been registered on data.drives-network.org. The PAT is
an alternative to an API key, meant for short-term use within the API.
There are two ways to generate a PAT. The first is to enter user credentials
(email and password) to generate a new API session (fetch_option = "regenerate").
The second is to extend an API session without re-entering credentials (fetch_option = "refresh").
The "regenerate" option is recommended for new users and users with a week or more of inactivity.
The "refresh" option is recommended as a more secure option for users with a valid refresh token.
The PAT expires after about 15 minutes. The refresh token expires after seven days.'><meta property="og:description" content='This function generates a personal access token (PAT) for a user
who has been registered on data.drives-network.org. The PAT is
an alternative to an API key, meant for short-term use within the API.
There are two ways to generate a PAT. The first is to enter user credentials
(email and password) to generate a new API session (fetch_option = "regenerate").
The second is to extend an API session without re-entering credentials (fetch_option = "refresh").
The "regenerate" option is recommended for new users and users with a week or more of inactivity.
The "refresh" option is recommended as a more secure option for users with a valid refresh token.
The PAT expires after about 15 minutes. The refresh token expires after seven days.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">drivesR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/drivesR-data-use.html">Workflow for using DRIVES database tables with drivesR</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create Directus Personal Access Token</h1>

      <div class="d-none name"><code>generate_directus_pat.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function generates a personal access token (PAT) for a user
who has been registered on data.drives-network.org. The PAT is
an alternative to an API key, meant for short-term use within the API.
There are two ways to generate a PAT. The first is to enter user credentials
(email and password) to generate a new API session (fetch_option = "regenerate").
The second is to extend an API session without re-entering credentials (fetch_option = "refresh").
The "regenerate" option is recommended for new users and users with a week or more of inactivity.
The "refresh" option is recommended as a more secure option for users with a valid refresh token.
The PAT expires after about 15 minutes. The refresh token expires after seven days.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">generate_directus_pat</span><span class="op">(</span></span>
<span>  useremail <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  userpassword <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fetch_option <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"regenerate"</span>, <span class="st">"refresh"</span>, <span class="st">"load"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  refresh_token <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auth"</span>, <span class="st">"list"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  savedir <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  savename <span class="op">=</span> <span class="st">"directus_PAT.txt"</span>,</span>
<span>  myurl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"drivesR.default.url"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-useremail">useremail<a class="anchor" aria-label="anchor" href="#arg-useremail"></a></dt>
<dd><p>Email address registered with data.drives-network.org.
Not needed if fetch_option = "refresh".</p></dd>


<dt id="arg-userpassword">userpassword<a class="anchor" aria-label="anchor" href="#arg-userpassword"></a></dt>
<dd><p>Account password. Not needed if fetch_option = "refresh".</p></dd>


<dt id="arg-fetch-option">fetch_option<a class="anchor" aria-label="anchor" href="#arg-fetch-option"></a></dt>
<dd><p>Options are "regenerate", "refresh", or "load".
"regenerate" means that a new personal access token and refresh token are generated for the user.
This option should be used for first-time access, or
"refresh" means that a new personal access token and refresh token are generated without needing to
re-enter user credentials. Previous PATs and refresh tokens will not work after refreshing.</p></dd>


<dt id="arg-refresh-token">refresh_token<a class="anchor" aria-label="anchor" href="#arg-refresh-token"></a></dt>
<dd><p>An optional string input for the refresh token used to update the PAT. Only applies if
fetch_option = "refresh". If NULL, the refresh token is read from the file specified in savedir and savename.
Because the refresh token is reset after each use, we recommend reading from a file.</p></dd>


<dt id="arg-save">save<a class="anchor" aria-label="anchor" href="#arg-save"></a></dt>
<dd><p>If TRUE, the personal access token is saved to a file specified in savedir and savename.</p></dd>


<dt id="arg-output-type">output_type<a class="anchor" aria-label="anchor" href="#arg-output-type"></a></dt>
<dd><p>If set to "auth" (default), the function returns a character string ready for
Directus API calls ("Bearer insertaccesstoken").
If set to "list" the function returns a list of variables supplied by the Directus API
(expiration time, refresh_token, access_token). The list output is included for troubleshooting
and in case there is some issue with saving data to files.</p></dd>


<dt id="arg-savedir">savedir<a class="anchor" aria-label="anchor" href="#arg-savedir"></a></dt>
<dd><p>Directory where the text file containing the personal access token should be saved.
Defaults to the working directory.</p></dd>


<dt id="arg-savename">savename<a class="anchor" aria-label="anchor" href="#arg-savename"></a></dt>
<dd><p>Name of the file containing the PAT. Default is directus_PAT.txt.</p></dd>


<dt id="arg-myurl">myurl<a class="anchor" aria-label="anchor" href="#arg-myurl"></a></dt>
<dd><p>Default url (data.drives-network.org)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a text object "Bearer newPAT" that can be used as
the input for set_default_token().</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>By default, this function saves and loads the PAT to and from an external file.
This file should not be edited by the user. If you're using Git,
be sure to add this file to your git ignore.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># to begin a new API session:</span></span></span>
<span class="r-in"><span><span class="co">#not run: mypat &lt;- generate_directus_pat(useremail = "yourDirectusEmail", </span></span></span>
<span class="r-in"><span><span class="co">#                                          userpassword = "yourDirectusPassword",</span></span></span>
<span class="r-in"><span><span class="co">#                                           fetch_option = "regenerate",</span></span></span>
<span class="r-in"><span><span class="co">#                                             savedir = "mysupersafefolder", # default is working directory</span></span></span>
<span class="r-in"><span><span class="co">#                                           savename = "directus_pat.txt")</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># to extend an existing API session:</span></span></span>
<span class="r-in"><span><span class="co"># not run: mypat &lt;- generate_directus_pat(fetch_option = "refresh",</span></span></span>
<span class="r-in"><span><span class="co">#                                            savedir = "mysupersafefolder", # dir and </span></span></span>
<span class="r-in"><span><span class="co">#                                           savename = "directus_pat.txt) # name must match initial run</span></span></span>
<span class="r-in"><span><span class="co"># not run: set_default_token(mypat)</span></span></span>
<span class="r-in"><span><span class="co"># not run: test_api_token(mypat) # to check if it works. </span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Katherine Muller.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

